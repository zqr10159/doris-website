"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[157846],{15680:(e,a,t)=>{t.d(a,{xA:()=>p,yg:()=>m});var n=t(296540);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var d=n.createContext({}),s=function(e){var a=n.useContext(d),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},p=function(e){var a=s(e.components);return n.createElement(d.Provider,{value:a},e.children)},y="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},g=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,d=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),y=s(t),g=r,m=y["".concat(d,".").concat(g)]||y[g]||u[g]||o;return t?n.createElement(m,l(l({ref:a},p),{},{components:t})):n.createElement(m,l({ref:a},p))}));function m(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=g;var i={};for(var d in a)hasOwnProperty.call(a,d)&&(i[d]=a[d]);i.originalType=e,i[y]="string"==typeof e?e:r,l[1]=i;for(var s=2;s<o;s++)l[s]=t[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}g.displayName="MDXCreateElement"},375620:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var n=t(58168),r=(t(296540),t(15680));const o={title:"Overview",language:"en"},l=void 0,i={unversionedId:"data-operate/import/load-manual",id:"version-2.1/data-operate/import/load-manual",title:"Overview",description:"\x3c!--",source:"@site/versioned_docs/version-2.1/data-operate/import/load-manual.md",sourceDirName:"data-operate/import",slug:"/data-operate/import/load-manual",permalink:"/docs/2.1/data-operate/import/load-manual",draft:!1,tags:[],version:"2.1",frontMatter:{title:"Overview",language:"en"},sidebar:"docs",previous:{title:"Best Practices",permalink:"/docs/2.1/table-design/best-practice"},next:{title:"Stream Load",permalink:"/docs/2.1/data-operate/import/stream-load-manual"}},d={},s=[{value:"Supported data sources",id:"supported-data-sources",level:2},{value:"By scene",id:"by-scene",level:3},{value:"By loading method",id:"by-loading-method",level:3},{value:"Supported Data Formats",id:"supported-data-formats",level:2},{value:"Import instructions",id:"import-instructions",level:2},{value:"Atomicity",id:"atomicity",level:3},{value:"Synchronous and asynchronous loading",id:"synchronous-and-asynchronous-loading",level:2},{value:"Load the array-type data",id:"load-the-array-type-data",level:2},{value:"Execution Engine Selected",id:"execution-engine-selected",level:2}],p={toc:s},y="wrapper";function u(e){let{components:a,...t}=e;return(0,r.yg)(y,(0,n.A)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"overview"},"Overview"),(0,r.yg)("h2",{id:"supported-data-sources"},"Supported data sources"),(0,r.yg)("p",null,"Apache Doris provides a variety of data import solutions, and you can choose different data loading methods for different data sources."),(0,r.yg)("h3",{id:"by-scene"},"By scene"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Data Source"),(0,r.yg)("th",{parentName:"tr",align:null},"Loading Method"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Object Storage (s3), HDFS"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"./broker-load-manual"},"Loading data using Broker"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Local file"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"./stream-load-manual"},"Loading local data"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Kafka"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"./routine-load-manual"},"Subscribing to Kafka data"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"MySQL, PostgreSQL, Oracle, SQLServer"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"./mysql-load-manual"},"Sync data via external table"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Loading via JDBC"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"../../lakehouse/database/jdbc"},"Sync data using JDBC"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Loading JSON format data"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"./load-json-format"},"JSON format data Loading"))))),(0,r.yg)("h3",{id:"by-loading-method"},"By loading method"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Loading method"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Broker Load"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"./broker-load-manual"},"Import external storage data via Broker"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Stream Load"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"./stream-load-manual"},"Stream import data (local file and memory data)"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Routine Load"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"./routine-load-manual"},"Import Kafka data"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Insert Into"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"./insert-into-manual"},"External table imports data through INSERT"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"S3 Load"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"./broker-load-manual"},"Object storage data import of S3 protocol"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"MySQL Load"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("a",{parentName:"td",href:"./mysql-load-manual"},"Local data import of MySql protocol"))))),(0,r.yg)("h2",{id:"supported-data-formats"},"Supported Data Formats"),(0,r.yg)("p",null,"Different import methods support slightly different data formats."),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Import Methods"),(0,r.yg)("th",{parentName:"tr",align:null},"Supported Formats"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Broker Load"),(0,r.yg)("td",{parentName:"tr",align:null},"parquet, orc, csv, gzip")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Stream Load"),(0,r.yg)("td",{parentName:"tr",align:null},"csv, json, parquet, orc")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Routine Load"),(0,r.yg)("td",{parentName:"tr",align:null},"csv, json")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"MySql Load"),(0,r.yg)("td",{parentName:"tr",align:null},"csv")))),(0,r.yg)("h2",{id:"import-instructions"},"Import instructions"),(0,r.yg)("p",null,"The data import implementation of Apache Doris has the following common features, which are introduced here to help you better use the data import function"),(0,r.yg)("h3",{id:"atomicity"},"Atomicity"),(0,r.yg)("p",null,"Each import job of Doris, whether it is batch import using Broker Load or single import using INSERT statement, is a complete transaction operation. The import transaction can ensure that the data in a batch takes effect atomically, and there will be no partial data writing."),(0,r.yg)("p",null,"At the same time, an import job will have a Label. This Label is unique under a database (Database) and is used to uniquely identify an import job. Label can be specified by the user, and some import functions will also be automatically generated by the system."),(0,r.yg)("p",null,"Label is used to ensure that the corresponding import job can only be successfully imported once. A successfully imported Label, when used again, will be rejected with the error ",(0,r.yg)("inlineCode",{parentName:"p"},"Label already used"),". Through this mechanism, ",(0,r.yg)("inlineCode",{parentName:"p"},"At-Most-Once")," semantics can be implemented in Doris. If combined with the ",(0,r.yg)("inlineCode",{parentName:"p"},"At-Least-Once")," semantics of the upstream system, the ",(0,r.yg)("inlineCode",{parentName:"p"},"Exactly-Once")," semantics of imported data can be achieved."),(0,r.yg)("p",null,"For best practices on atomicity, see ",(0,r.yg)("a",{parentName:"p",href:"https://doris.apache.org/docs/data-operate/import/load-atomicity/"},"Loading Transactions and Atomicity"),"."),(0,r.yg)("h2",{id:"synchronous-and-asynchronous-loading"},"Synchronous and asynchronous loading"),(0,r.yg)("p",null,"Loading methods are divided into synchronous and asynchronous methods. For the synchronous loading method, the returned result indicates whether the loading succeeds or fails. For the asynchronous loading method, a successful result only means that the job was submitted successfully, but not that the data was loaded successfully. You need to use the corresponding command to check the running status of the loading job."),(0,r.yg)("h2",{id:"load-the-array-type-data"},"Load the array-type data"),(0,r.yg)("p",null,"The array function can only be supported in vectorization scenarios, but non-vectorization scenarios are not supported.\nIf you want to apply the array function to load data, enable vectorization engine, and then cast the input parameter column into the array type according to the parameter of the array function. Finally, you can continue to use the array function."),(0,r.yg)("p",null,"For example, in the following loading job, you need to cast columns b14 and a13 into ",(0,r.yg)("inlineCode",{parentName:"p"},"array<string>")," type, and then use the ",(0,r.yg)("inlineCode",{parentName:"p"},"array_union")," function."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},'LOAD LABEL label_03_14_49_34_898986_19090452100 ( \n  DATA INFILE("hdfs://test.hdfs.com:9000/user/test/data/sys/load/array_test.data") \n  INTO TABLE `test_array_table` \n  COLUMNS TERMINATED BY "|" (`k1`, `a1`, `a2`, `a3`, `a4`, `a5`, `a6`, `a7`, `a8`, `a9`, `a10`, `a11`, `a12`, `a13`, `b14`) \n  SET(a14=array_union(cast(b14 as array<string>), cast(a13 as array<string>))) WHERE size(a2) > 270) \n  WITH BROKER "hdfs" ("username"="test_array", "password"="") \n  PROPERTIES( "max_filter_ratio"="0.8" );\n')),(0,r.yg)("h2",{id:"execution-engine-selected"},"Execution Engine Selected"),(0,r.yg)("p",null,"The Pipeline engine is turned off by default on import, and is enabled by the following two variables:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("inlineCode",{parentName:"p"},"enable_pipeline_load")," in the ",(0,r.yg)("a",{parentName:"p",href:"../../admin-manual/config/fe-config"},"FE configuration")," file. When enabled, import tasks such as Streamload will try to use the Pipeline engine.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("inlineCode",{parentName:"p"},"enable_nereids_dml_with_pipeline")," in Session Variable to enable insert into to try to use the Pipeline engine."))),(0,r.yg)("p",null,"When the above variables are turned on, whether and which set of Pipeline engine is used still depends on the settings of the other two Session Variables ",(0,r.yg)("inlineCode",{parentName:"p"},"enable_pipeline_engine")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"enable_pipeline_x_engine"),". When both are enabled, PipelineX is selected in preference to the Pipeline Engine. If neither is enabled, the loading job will not be executed using the Pipeline engine even if the above variables are set to ",(0,r.yg)("inlineCode",{parentName:"p"},"true"),"."))}u.isMDXComponent=!0}}]);