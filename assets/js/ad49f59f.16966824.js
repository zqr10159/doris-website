"use strict";(self.webpackChunkdoris_website=self.webpackChunkdoris_website||[]).push([[473279],{15680:(e,t,a)=>{a.d(t,{xA:()=>d,yg:()=>y});var r=a(296540);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),m=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},d=function(e){var t=m(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),p=m(a),u=n,y=p["".concat(s,".").concat(u)]||p[u]||g[u]||o;return a?r.createElement(y,l(l({ref:t},d),{},{components:a})):r.createElement(y,l({ref:t},d))}));function y(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,l=new Array(o);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[p]="string"==typeof e?e:n,l[1]=i;for(var m=2;m<o;m++)l[m]=a[m];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}u.displayName="MDXCreateElement"},944303:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>g,frontMatter:()=>o,metadata:()=>i,toc:()=>m});var r=a(58168),n=(a(296540),a(15680));const o={title:"Loading Overview",language:"en"},l=void 0,i={unversionedId:"data-operate/import/load-manual",id:"data-operate/import/load-manual",title:"Loading Overview",description:"\x3c!--",source:"@site/docs/data-operate/import/load-manual.md",sourceDirName:"data-operate/import",slug:"/data-operate/import/load-manual",permalink:"/docs/dev/data-operate/import/load-manual",draft:!1,tags:[],version:"current",frontMatter:{title:"Loading Overview",language:"en"},sidebar:"docs",previous:{title:"Best Practices",permalink:"/docs/dev/table-design/best-practice"},next:{title:"Stream Load",permalink:"/docs/dev/data-operate/import/import-way/stream-load-manual"}},s={},m=[{value:"Introduction to Import Solutions",id:"introduction-to-import-solutions",level:2},{value:"Import Methods",id:"import-methods",level:3},{value:"Ecosystem Tools",id:"ecosystem-tools",level:3},{value:"File Formats",id:"file-formats",level:3},{value:"Data Sources",id:"data-sources",level:3},{value:"Concept Introduction",id:"concept-introduction",level:2},{value:"Atomicity",id:"atomicity",level:3},{value:"Label Mechanism",id:"label-mechanism",level:3},{value:"Import Mode",id:"import-mode",level:3},{value:"Data Transformation",id:"data-transformation",level:3},{value:"Error Data Handling",id:"error-data-handling",level:3},{value:"Minimum Write Replica Number",id:"minimum-write-replica-number",level:3}],d={toc:m},p="wrapper";function g(e){let{components:t,...a}=e;return(0,n.yg)(p,(0,r.A)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h2",{id:"introduction-to-import-solutions"},"Introduction to Import Solutions"),(0,n.yg)("p",null,"This section provides an overview of import solutions in order to help users choose the most suitable import solution based on data source, file format, and data volume."),(0,n.yg)("p",null,"Doris supports various import methods, including Stream Load, Broker Load, Insert Into, Routine Load, and MySQL Load. In addition to using Doris's native import methods, Doris also provides a range of ecosystem tools to assist users in data import, including Spark Doris Connector, Flink Doris Connector, Doris Kafka Connector, DataX Doriswriter, and Doris Streamloader."),(0,n.yg)("p",null,"For high-frequency small import scenarios, Doris also provides the Group Commit feature. Group Commit is not a new import method, but an extension to ",(0,n.yg)("inlineCode",{parentName:"p"},"INSERT INTO VALUES, Stream Load, Http Stream"),", which batches small imports on the server side."),(0,n.yg)("p",null,"Each import method and ecosystem tool has different use cases and supports different data sources and file formats."),(0,n.yg)("h3",{id:"import-methods"},"Import Methods"),(0,n.yg)("table",null,(0,n.yg)("thead",{parentName:"table"},(0,n.yg)("tr",{parentName:"thead"},(0,n.yg)("th",{parentName:"tr",align:"left"},"Import Method"),(0,n.yg)("th",{parentName:"tr",align:"left"},"Use Case"),(0,n.yg)("th",{parentName:"tr",align:null},"Supported File Formats"),(0,n.yg)("th",{parentName:"tr",align:null},"Single Import Volume"),(0,n.yg)("th",{parentName:"tr",align:null},"Import Mode"))),(0,n.yg)("tbody",{parentName:"table"},(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:"left"},(0,n.yg)("a",{parentName:"td",href:"./import-way/stream-load-manual"},"Stream Load")),(0,n.yg)("td",{parentName:"tr",align:"left"},"Import from local data"),(0,n.yg)("td",{parentName:"tr",align:null},"csv, json, parquet, orc"),(0,n.yg)("td",{parentName:"tr",align:null},"Less than 10GB"),(0,n.yg)("td",{parentName:"tr",align:null},"Synchronous")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:"left"},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/data-operate/import/import-way/broker-load-manual"},"Broker Load")),(0,n.yg)("td",{parentName:"tr",align:"left"},"Import from object storage, HDFS, etc."),(0,n.yg)("td",{parentName:"tr",align:null},"csv, json, parquet, orc"),(0,n.yg)("td",{parentName:"tr",align:null},"Tens of GB to hundreds of GB"),(0,n.yg)("td",{parentName:"tr",align:null},"Asynchronous")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:"left"},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/data-operate/import/import-way/insert-into-manual"},"INSERT INTO VALUES")),(0,n.yg)("td",{parentName:"tr",align:"left"},(0,n.yg)("p",null,"Import single or small batch data"),(0,n.yg)("p",null,"Import via JDBC, etc.")),(0,n.yg)("td",{parentName:"tr",align:null},"SQL"),(0,n.yg)("td",{parentName:"tr",align:null},"Simple testing"),(0,n.yg)("td",{parentName:"tr",align:null},"Synchronous")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:"left"},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/data-operate/import/import-way/insert-into-manual"},"INSERT INTO SELECT")),(0,n.yg)("td",{parentName:"tr",align:"left"},(0,n.yg)("p",null,"Import data between Doris internal tables"),(0,n.yg)("p",null,"Import external tables")),(0,n.yg)("td",{parentName:"tr",align:null},"SQL"),(0,n.yg)("td",{parentName:"tr",align:null},"Depending on memory size"),(0,n.yg)("td",{parentName:"tr",align:null},"Synchronous")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:"left"},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/data-operate/import/import-way/routine-load-manual"},"Routine Load")),(0,n.yg)("td",{parentName:"tr",align:"left"},"Real-time import from Kafka"),(0,n.yg)("td",{parentName:"tr",align:null},"csv, json"),(0,n.yg)("td",{parentName:"tr",align:null},"Micro-batch import MB to GB"),(0,n.yg)("td",{parentName:"tr",align:null},"Asynchronous")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:"left"},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/data-operate/import/import-way/mysql-load-manual"},"MySQL Load")),(0,n.yg)("td",{parentName:"tr",align:"left"},"Import from local data"),(0,n.yg)("td",{parentName:"tr",align:null},"csv"),(0,n.yg)("td",{parentName:"tr",align:null},"Less than 10GB"),(0,n.yg)("td",{parentName:"tr",align:null},"Synchronous")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:"left"},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/data-operate/import/import-way/group-commit-manual"},"Group Commit")),(0,n.yg)("td",{parentName:"tr",align:"left"},"High-frequency small batch import"),(0,n.yg)("td",{parentName:"tr",align:null},"Depending on the import method used"),(0,n.yg)("td",{parentName:"tr",align:null},"Micro-batch import KB"),(0,n.yg)("td",{parentName:"tr",align:null},"-")))),(0,n.yg)("h3",{id:"ecosystem-tools"},"Ecosystem Tools"),(0,n.yg)("table",null,(0,n.yg)("thead",{parentName:"table"},(0,n.yg)("tr",{parentName:"thead"},(0,n.yg)("th",{parentName:"tr",align:null},"Ecosystem Tool"),(0,n.yg)("th",{parentName:"tr",align:null},"Use Case"))),(0,n.yg)("tbody",{parentName:"table"},(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/ecosystem/spark-doris-connector"},"Spark Doris Connector")),(0,n.yg)("td",{parentName:"tr",align:null},"Batch import data from Spark")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/ecosystem/flink-doris-connector"},"Flink Doris Connector")),(0,n.yg)("td",{parentName:"tr",align:null},"Real-time import data from Flink")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/ecosystem/doris-kafka-connector"},"Doris Kafka Connector")),(0,n.yg)("td",{parentName:"tr",align:null},"Real-time import data from Kafka")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/ecosystem/datax"},"DataX Doriswriter")),(0,n.yg)("td",{parentName:"tr",align:null},"Synchronize data from MySQL, Oracle, SQL Server, PostgreSQL, Hive, ADS, etc.")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/ecosystem/doris-streamloader"},"Doris Streamloader")),(0,n.yg)("td",{parentName:"tr",align:null},"Implements concurrent import for Stream Load, allowing multiple files and directories to be imported at once")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("a",{parentName:"td",href:"/docs/dev/data-operate/import/migrate-data-from-other-olap"},"X2Doris")),(0,n.yg)("td",{parentName:"tr",align:null},"Migrate data from other AP databases to Doris")))),(0,n.yg)("h3",{id:"file-formats"},"File Formats"),(0,n.yg)("table",null,(0,n.yg)("thead",{parentName:"table"},(0,n.yg)("tr",{parentName:"thead"},(0,n.yg)("th",{parentName:"tr",align:null},"File Format"),(0,n.yg)("th",{parentName:"tr",align:null},"Supported Import Methods"),(0,n.yg)("th",{parentName:"tr",align:null},"Supported Compression Formats"))),(0,n.yg)("tbody",{parentName:"table"},(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"csv"),(0,n.yg)("td",{parentName:"tr",align:null},"Stream Load, Broker Load, MySQL Load"),(0,n.yg)("td",{parentName:"tr",align:null},"gz, lzo, bz2, lz4, LZ4FRAME,lzop, deflate")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"json"),(0,n.yg)("td",{parentName:"tr",align:null},"Stream Load, Broker Load"),(0,n.yg)("td",{parentName:"tr",align:null},"Not supported")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"parquet"),(0,n.yg)("td",{parentName:"tr",align:null},"Stream Load, Broker Load"),(0,n.yg)("td",{parentName:"tr",align:null},"Not supported")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"orc"),(0,n.yg)("td",{parentName:"tr",align:null},"Stream Load, Broker Load"),(0,n.yg)("td",{parentName:"tr",align:null},"Not supported")))),(0,n.yg)("h3",{id:"data-sources"},"Data Sources"),(0,n.yg)("table",null,(0,n.yg)("thead",{parentName:"table"},(0,n.yg)("tr",{parentName:"thead"},(0,n.yg)("th",{parentName:"tr",align:null},"Data Source"),(0,n.yg)("th",{parentName:"tr",align:null},"Supported Import Methods"))),(0,n.yg)("tbody",{parentName:"table"},(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Local data"),(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("p",null,"Stream Load")," ",(0,n.yg)("p",null,"StreamLoader")," ",(0,n.yg)("p",null,"MySQL Load"))),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Object storage"),(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("p",null,"Broker Load")," ",(0,n.yg)("p",null,"INSERT TO SELECT FROM S3 TVF"))),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"HDFS"),(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("p",null,"Broker Load")," ",(0,n.yg)("p",null,"INSERT TO SELECT FROM HDFS TVF"))),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Kafka"),(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("p",null,"Routine Load")," ",(0,n.yg)("p",null,"Kakfa Doris Connector"))),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Flink"),(0,n.yg)("td",{parentName:"tr",align:null},"Flink Doris Connector")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Spark"),(0,n.yg)("td",{parentName:"tr",align:null},"Spark Doris Connector")),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Mysql, PostgreSQL, Oracle, SQL Server, and other TP databases"),(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("p",null,"Import via external tables")," ",(0,n.yg)("p",null,"Flink Doris Connector"))),(0,n.yg)("tr",{parentName:"tbody"},(0,n.yg)("td",{parentName:"tr",align:null},"Other AP databases"),(0,n.yg)("td",{parentName:"tr",align:null},(0,n.yg)("p",null,"X2Doris")," ",(0,n.yg)("p",null,"Import via external tables")," ",(0,n.yg)("p",null,"Spark/Flink Doris Connector"))))),(0,n.yg)("h2",{id:"concept-introduction"},"Concept Introduction"),(0,n.yg)("p",null,"This section mainly introduces some concepts related to import to help users better utilize the data import feature."),(0,n.yg)("h3",{id:"atomicity"},"Atomicity"),(0,n.yg)("p",null,"All import tasks in Doris are atomic, meaning that a import job either succeeds completely or fails completely. Partially successful data import will not occur within the same import task, and atomicity and consistency between materialized views and base tables are also guaranteed. For simple import tasks, users do not need to perform additional configurations or operations. For materialized views associated with tables, atomicity and consistency with the base table are also guaranteed."),(0,n.yg)("p",null,"More detailed info refer to ",(0,n.yg)("a",{parentName:"p",href:"/docs/dev/data-operate/transaction"},"Transaction"),"."),(0,n.yg)("h3",{id:"label-mechanism"},"Label Mechanism"),(0,n.yg)("p",null,"Import jobs in Doris can be assigned a label. This label is usually a user-defined string with certain business logic properties. If not specified by the user, the system will generate one automatically. The main purpose of the label is to uniquely identify an import task and ensure that the same label is imported successfully only once."),(0,n.yg)("p",null,"The label is used to ensure that the corresponding import job can only be successfully imported once. If a label that has been successfully imported is used again, it will be rejected and an error message ",(0,n.yg)("inlineCode",{parentName:"p"},"Label already used")," will be reported. With this mechanism, Doris can achieve ",(0,n.yg)("inlineCode",{parentName:"p"},"At-Most-Once")," semantics on the Doris side. If combined with the ",(0,n.yg)("inlineCode",{parentName:"p"},"At-Least-Once")," semantics of the upstream system, it is possible to achieve ",(0,n.yg)("inlineCode",{parentName:"p"},"Exactly-Once")," semantics for importing data."),(0,n.yg)("h3",{id:"import-mode"},"Import Mode"),(0,n.yg)("p",null,"Import mode can be either synchronous or asynchronous. For synchronous import methods, the result returned indicates whether the import is successful or not. For asynchronous import methods, a successful return only indicates that the job has been submitted successfully, not that the data import is successful. Users need to use the corresponding command to check the running status of the import job."),(0,n.yg)("h3",{id:"data-transformation"},"Data Transformation"),(0,n.yg)("p",null,"When importing data into a table, sometimes the content in the table may not be exactly the same as the content in the source data file, and data transformation is required. Doris supports performing certain transformations on the source data during the import process. Specifically, it includes mapping, conversion, pre-filtering, and post-filtering."),(0,n.yg)("h3",{id:"error-data-handling"},"Error Data Handling"),(0,n.yg)("p",null,"During the import process, the data types of the original columns and the target columns may not be completely consistent. During the import, the values of original columns with inconsistent data types will be converted. During the conversion process, conversion failures may occur, such as field type mismatch or field length exceeded. Strict mode is used to control whether to filter out these conversion failure error data rows during the import process."),(0,n.yg)("h3",{id:"minimum-write-replica-number"},"Minimum Write Replica Number"),(0,n.yg)("p",null,"By default, data import requires that at least a majority of replicas are successfully written for the import to be considered successful. However, this approach is not flexible and may cause inconvenience in certain scenarios. Doris allows users to set the minimum write replica number (Min Load Replica Num). For import data tasks, when the number of replicas successfully written is greater than or equal to the minimum write replica number, the import is considered successful."))}g.isMDXComponent=!0}}]);